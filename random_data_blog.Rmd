---
title: "Random Data Set"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  html_document:
    toc: true
    theme: journal
    number_sections: true
  pdf_document:
    toc: true
    number_sections: true
---

This post will discuss a recent GitHub package I'm working on, [**wakefield**](https://github.com/trinker/wakefield) to generate random data sets.

![](http://raw.githubusercontent.com/trinker/wakefield/master/inst/wakefield_logo/r_wakefield.png)

One of my more popular blog posts, [Function To Generate A Random Data Set](https://trinkerrstuff.wordpress.com/2012/05/02/function-to-generate-a-random-data-set/), was an early post about generating random data sets.  Basically I had created a function to generate a random data set of various types of continuous and categorical columns.  Optionally, the user could assign a certain percentage of cells in each column to missing values (`NA`).  Often I find myself generating random data sets to test code/functions/models out on but rarely do I use that original random data generator.  Why?

1. For one it's not in a package so it's not handy    
2. It generates too many unrelated columns

Recently I had an idea inspired by Richie Cotton's [**rebus**](https://github.com/richierocks/rebus) and  Kevin Ushey & Jim Hester's [**rex**](https://github.com/kevinushey/rex) regex based packages.  Basically, these packages allow the user to utilize many little human readable regular expression chunks to build a larger desired regular expression.  I thought, why not apply this concept to building a random data set.  I'd make mini, modular random variable generating functions that the user passes to a `data.frame` like function and the result is a quick data set just as desired.  I also like the way [**dplyr**](https://github.com/hadley/dplyr) makes a `tbl_df` that prints only a few rows and limits the number of columns.  So I made the output a `tbl_df` object and print accordingly.

# Demo

## Random Variable Functions
First we'll use the [**pacman**](http://cran.r-project.org/web/packages/pacman/index.html) package to grab and load the **wakefield** package from GitHub.

```{r}
if (!require("pacman")) install.packages("pacman"); library(pacman)
p_load_gh("trinker/wakefield")
```

Then we'll look at a random variable generating function.

```{r, message=FALSE}
race(n=10)
attributes(race(n=10))
```

A few more...

```{r}
sex(10)
likert_7(10)
gpa(10)
dna(10)
string(10, length = 5)
```
## Random Data Frames

Ok so modular chunks great...but they get more powerful inside of the `r_data_frame` function.  The user only needs to supply `n` once and the column names are auto-generated by the function (can be specified with `name =` prefix as usual).  The call parenthesis are not even needed if no other arguments are passed.

```{r}
set.seed(10)

r_data_frame(
    n = 500,
    id,
    race,
    age,
    smokes,
	marital,
    Start = hour,
	End = hour,
    iq,
    height,
    died
)
```

This `r_data_frame` is pretty awesome and not my own.  Josh O'Brien wrote the function as seen [HERE](http://stackoverflow.com/a/29617983/1000343).  Pretty nifty trick.  Josh thank you for your help with bringing to fruition the concept.

## Missing Values

The original blog post provided a means for adding missing values.  **wakefield** keeps this alive and adds more flexibility.  It is no longer a part of the data generation process but a function, `r_na`, that is called after the data set has been generated.  The user can specify which columns to add `NA`s to.  By default column 1 is excluded.  This works nicely within a **dplyr**/**magrittr** pipe line.  ***Note***: ***dpyr*** *has an `id` function ad well so the prefix `wakedfield::` must be used for `id`*.

```{r}
p_load(dplyr)
set.seed(10)

r_data_frame(
    n = 30,
    id,
    state,
    month,
    sat,
    minute,
    iq,
	zip_code,
	year,
    Scoring = rnorm,
    Smoker = valid,
	sentence
) %>%
    r_na(prob=.25)
```

## Default Data Set

There's still a default data set function, `r_data`, in case the functionality of the original random data generation function is missed or if you're in a hurry and aren't too picky about the data being generated.  

```{r}
set.seed(10)

r_data(1000)
```

# Future Direction

Where will the **wakefield** package go from here?  Well this blog post is a measure of public interest.  I use it and at this point it lives on [GitHub](https://github.com/trinker/wakefield).  I'd like interest in two ways: (a) users and (b) contributors.  Users make the effort worth while and provide feedback and suggested improvements.  Contributors make maintenance easier.  

There is one area of improvement I'd like to see in the `r_data_frame` (`r_list`) functions.  I like that I don't have to specify an `n` for each variable/column.  I also like that column names are auto generated.  I also like that **dplyr**'s `data_frame` function allows me to create a variable `y` based on column `x`.  So I can make columns that are correlated or any function of another column.  

```{r, message=FALSE}
p_load(dplyr)
set.seed(10)

dplyr::data_frame(
    x = 1:10,
	y = x + rnorm(10)
)
```
The user can use the modular variable functions inside of `dplyr::data_frame` and have this functionality but the column name and `n` must explicit be passed to each variable.  

```{r}
set.seed(10)

dplyr::data_frame(
	ID = wakefield::id(n=10),
    Smokes = smokes(n=10),
	Sick = ifelse(Smokes, sample(5:10, 10, TRUE), sample(0:4, 10, TRUE)),	
	Death = ifelse(Smokes, sample(0:1, 10, TRUE, prob = c(.2, .8)), sample(0:1, 10, TRUE, prob = c(.7, .3)))
)
```

I'd like to modify `r_data_frame` to continue to pass `n` and extract column names yet have the ability to make columns a function of other columns.  Currently this is controlled by the [`r_list`](https://github.com/trinker/wakefield/blob/master/R/r_list.R) function that `r_data_frame` wraps.

# Getting Involved

If you're interested in getting involved with use or contributing you can:

1. Install and use [**wakefield**](https://github.com/trinker/wakefield)    
2. Provide feedback via comments below    
3. Provide feedback (bugs, improvements, and feature requests) via [wakefield's Issues Page](https://github.com/trinker/wakefield/issues)   
4. Fork from [GitHub](https://github.com/trinker/wakefield) and give a Pull Request    

Thanks for reading, your feedback is welcomed.

---

\**Get the R code for this post* [*HERE*](https://raw.githubusercontent.com/trinker/random_data/master/random_data_blog.R)    
\**Get a PDF version this post* [*HERE*](https://github.com/trinker/random_data/blob/master/random_data_blog.pdf)








